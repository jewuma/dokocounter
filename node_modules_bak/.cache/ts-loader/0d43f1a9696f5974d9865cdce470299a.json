{"remainingRequest":"C:\\prog\\doko3\\node_modules\\babel-loader\\lib\\index.js!C:\\prog\\doko3\\node_modules\\ts-loader\\index.js??ref--15-2!C:\\prog\\doko3\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\prog\\doko3\\src\\backend.ts","dependencies":[{"path":"C:\\prog\\doko3\\src\\backend.ts","mtime":1664115870317},{"path":"C:\\prog\\doko3\\babel.config.js","mtime":1639842632362},{"path":"C:\\prog\\doko3\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639842481421},{"path":"C:\\prog\\doko3\\node_modules\\babel-loader\\lib\\index.js","mtime":1639842509641},{"path":"C:\\prog\\doko3\\node_modules\\ts-loader\\index.js","mtime":1639842516501},{"path":"C:\\prog\\doko3\\node_modules\\eslint-loader\\index.js","mtime":1639842489139}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxwcm9nXFxkb2tvM1xcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQzpcXHByb2dcXGRva28zXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzpcXHByb2dcXGRva28zXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKZXhwb3J0IHZhciBrb250cmFSZTsKCihmdW5jdGlvbiAoa29udHJhUmUpIHsKICBrb250cmFSZVtrb250cmFSZVsiUmUiXSA9IDBdID0gIlJlIjsKICBrb250cmFSZVtrb250cmFSZVsiS29udHJhIl0gPSAxXSA9ICJLb250cmEiOwp9KShrb250cmFSZSB8fCAoa29udHJhUmUgPSB7fSkpOwoKdmFyIEhPU1QgPSAiaHR0cDovLzE5Mi4xNjguMTc4LjEwNS9kb2tvMi8iOwpleHBvcnQgdmFyIGJhY2tlbmQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIGJhY2tlbmQoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgYmFja2VuZCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoYmFja2VuZCwgW3sKICAgIGtleTogIm5ld1BsYXllciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX25ld1BsYXllciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShwbGF5ZXIpIHsKICAgICAgICB2YXIgcmVzLCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCIiLmNvbmNhdChIT1NULCAiYXBpL3BsYXllcnMucGhwIiksIHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQ29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBsYXllcikKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIG5ld1BsYXllcihfeCkgewogICAgICAgIHJldHVybiBfbmV3UGxheWVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXdQbGF5ZXI7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJkZWxldGVQbGF5ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9kZWxldGVQbGF5ZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGlkKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCIiLmNvbmNhdChIT1NULCAiYXBpL3BsYXllcnMucGhwLyIpLmNvbmNhdChpZCksIHsKICAgICAgICAgICAgICAgICAgbWV0aG9kOiAiREVMRVRFIgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlcy5zdGF0dXMgPT09IDIwMCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGRlbGV0ZVBsYXllcihfeDIpIHsKICAgICAgICByZXR1cm4gX2RlbGV0ZVBsYXllci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZGVsZXRlUGxheWVyOwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2V0UExheWVyQWN0aXZlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2V0UExheWVyQWN0aXZlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhpZCwgYWN0aXZlKSB7CiAgICAgICAgdmFyIHBsYXllclRvVG9nZ2xlLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoUGxheWVyKGlkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcGxheWVyVG9Ub2dnbGUgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHBsYXllclRvVG9nZ2xlLmFjdGl2ZSA9IGFjdGl2ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCgiIi5jb25jYXQoSE9TVCwgImFwaS9wbGF5ZXJzLnBocC8iKS5jb25jYXQoaWQpLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBVVCIsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAiQ29udGVudC10eXBlIjogImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBsYXllclRvVG9nZ2xlKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDMuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzZXRQTGF5ZXJBY3RpdmUoX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX3NldFBMYXllckFjdGl2ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2V0UExheWVyQWN0aXZlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZmV0Y2hQbGF5ZXJzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZmV0Y2hQbGF5ZXJzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgcmVzLCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goIiIuY29uY2F0KEhPU1QsICJhcGkvcGxheWVycy5waHAiKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGRhdGEgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCBkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZmV0Y2hQbGF5ZXJzKCkgewogICAgICAgIHJldHVybiBfZmV0Y2hQbGF5ZXJzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZXRjaFBsYXllcnM7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJmZXRjaFBsYXllciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2ZldGNoUGxheWVyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNShpZCkgewogICAgICAgIHZhciByZXMsIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCgiIi5jb25jYXQoSE9TVCwgImFwaS9wbGF5ZXJzLnBocC8iKS5jb25jYXQoaWQpKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIGRhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBmZXRjaFBsYXllcihfeDUpIHsKICAgICAgICByZXR1cm4gX2ZldGNoUGxheWVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZXRjaFBsYXllcjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImZldGNoU3RhdGlzdGljcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2ZldGNoU3RhdGlzdGljcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIHJlcywgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCIiLmNvbmNhdChIT1NULCAiYXBpL3N0YXRpc3RpY3MucGhwIikpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGZldGNoU3RhdGlzdGljcygpIHsKICAgICAgICByZXR1cm4gX2ZldGNoU3RhdGlzdGljcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZmV0Y2hTdGF0aXN0aWNzOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZmV0Y2hBY3RpdmVMaXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZmV0Y2hBY3RpdmVMaXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgcmVzLCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2goIiIuY29uY2F0KEhPU1QsICJhcGkvZ2FtZXMucGhwIikpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGZldGNoQWN0aXZlTGlzdCgpIHsKICAgICAgICByZXR1cm4gX2ZldGNoQWN0aXZlTGlzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZmV0Y2hBY3RpdmVMaXN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2F2ZUdhbWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zYXZlR2FtZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoZ2FtZU9iamVjdCkgewogICAgICAgIHZhciBib2R5LCByZXMsIG5ld1N0YXRlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgYm9keSA9IEpTT04uc3RyaW5naWZ5KGdhbWVPYmplY3QpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCIiLmNvbmNhdChIT1NULCAiYXBpL2dhbWVzLnBocCIpLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtdHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBib2R5OiBib2R5CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgbmV3U3RhdGVzID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgbmV3U3RhdGVzKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2F2ZUdhbWUoX3g2KSB7CiAgICAgICAgcmV0dXJuIF9zYXZlR2FtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2F2ZUdhbWU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJzdGFydE5ld0xpc3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0TmV3TGlzdCgpIHsKICAgICAgZmV0Y2goIiIuY29uY2F0KEhPU1QsICJhcGkvZ2FtZXMucGhwL3N0YXJ0Z2FtZSIpKTsgLy9jb25zdCBkYXRhID0gYXdhaXQgcmVzLmpzb24oKTsKCiAgICAgIHJldHVybjsKICAgIH0KICB9XSk7CgogIHJldHVybiBiYWNrZW5kOwp9KCk7"},{"version":3,"sources":["C:\\prog\\doko3\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\prog\\doko3\\src\\backend.ts"],"names":[],"mappings":"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","sourcesContent":["export interface player {\n  id: number;\n  name: string;\n  surname: string;\n  active: boolean;\n}\nexport interface playerState {\n  [playerId: number]: {\n    name: string;\n    score: number;\n    party: kontraRe;\n  };\n}\nexport interface gameState {\n  playerId: number,\n  points: number,\n  party: kontraRe\n}\n\nexport interface statistic {\n  gamesplayed: number,\n  gamesre: number,\n  gameskontra: number,\n  gameswon: number,\n  gamessolo: number,\n  solowon: number,\n  totalpoints: number\n  averagepoints: number\n}\nexport interface game {\n  gameId: number,\n  players: gameState[]\n}\nexport interface saveGame {\n  playerStates: playerState,\n  kontraAnsage: number\n  reAnsage: number\n  result: number\n  extrapoints: number\n  changeLastGame: boolean\n\n}\nexport enum kontraRe {\n  Re,\n  Kontra,\n}\nconst HOST = \"http://192.168.178.105/doko2/\" as string\nexport class backend {\n  public async newPlayer(player: player): Promise<player> {\n    const res = await fetch(`${HOST}api/players.php`, {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n      body: JSON.stringify(player),\n    });\n    const data = await res.json();\n    return data;\n  }\n  async deletePlayer(id: number): Promise<boolean> {\n    const res = await fetch(`${HOST}api/players.php/${id}`, {\n      method: \"DELETE\",\n    });\n    return res.status === 200;\n  }\n  async setPLayerActive(id: number, active: boolean): Promise<player> {\n    const playerToToggle = await this.fetchPlayer(id);\n    playerToToggle.active = active;\n    const res = await fetch(`${HOST}api/players.php/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n      body: JSON.stringify(playerToToggle),\n    });\n    return await res.json();\n  }\n  async fetchPlayers(): Promise<player[]> {\n    const res = await fetch(`${HOST}api/players.php`);\n    const data = await res.json();\n    return data;\n  }\n  async fetchPlayer(id: number): Promise<player> {\n    const res = await fetch(`${HOST}api/players.php/${id}`);\n    const data = await res.json();\n    return data;\n  }\n  async fetchStatistics(): Promise<statistic[]> {\n    const res = await fetch(`${HOST}api/statistics.php`);\n    const data = await res.json();\n    return data;\n  }\n  async fetchActiveList(): Promise<game[]> {\n    const res = await fetch(`${HOST}api/games.php`);\n    const data = await res.json();\n    return data;\n  }\n  async saveGame(gameObject: saveGame): Promise<game[]> {\n    const body = JSON.stringify(gameObject);\n    const res = await fetch(`${HOST}api/games.php`, {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n      body\n    });\n    const newStates = await res.json();\n    return newStates;\n  }\n  startNewList(): void {\n    fetch(`${HOST}api/games.php/startgame`);\n    //const data = await res.json();\n    return;\n  }\n}"],"sourceRoot":""}]}